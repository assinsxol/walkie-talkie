<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <title>ุงูุชุทุจูู ุดุบุงู ูู</title>
    <link rel="stylesheet" href="./style.css">

  </head>
    
  <body>
  <!doctype html>
<html lang="ar" dir="rtl" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" id="vp" />
  <meta name="theme-color" content="#0b0f14" />
  <title>๐ป ุงูุชุทุจูู ุงููุงุณููู ูููู ุชููู</title>

  <!-- PWA (ููู ููุฅุดุนุงุฑุงุช ุจุงูุฎูููุฉ ุนูู Android ุนูุฏ ุงูุชุซุจูุช) -->
  <link rel="manifest" href="./manifest.webmanifest" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <link rel="stylesheet" href="./style.css" />

  <!-- โ Google AdSense Loader (ูุฑุฉ ูุงุญุฏุฉ ููุท) -->
  <script async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9061862125800717"
    crossorigin="anonymous"></script>
</head>

<body>

  <!-- Desktop-like prompt -->
  <div id="deskPrompt" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modalBox">
      <h3>ูุถุน ุงูููุจููุชุฑ ุฏุงุฎู ุงูุตูุญุฉ</h3>
      <p>
        ูู ุชุฑูุฏ ุนุฑุถ ุงููููุน ุจุชุฎุทูุท ูุดุจู ุงูููุจููุชุฑ (Desktop-Like)ุ
        <br>
        <span class="muted">ูุง ูููู ุฅุฌุจุงุฑ ุงููุชุตูุญ ุนูู โDesktop siteโ ุงูุญููููุ ููู ูุฐุง ูุญุณู ุงูุนุฑุถ ุนูู ุงูุฌูุงู.</span>
      </p>
      <div class="modalBtns">
        <button id="deskYes" class="btn primary" type="button">ูุนู</button>
        <button id="deskNo" class="btn ghost" type="button">ูุง</button>
      </div>
    </div>
  </div>

  <div class="page">
    <header class="topbar">
      <div class="brand">
        <div class="logo">๐ป</div>
        <div>
          <div class="title">ุงูุชุทุจูู ุงููุงุณููู ูููู ุชููู</div>
          <div class="subtitle">Agora + Firebase โข ูุงุฌูุฉ ุชุฏุฑูุจูุฉ</div>
        </div>
      </div>

      <div class="topActions">
        <button id="themeBtn" class="btn ghost" type="button" title="ูุถุน ูููู/ููุงุฑู">๐</button>
        <button id="notifBtn" class="btn ghost" type="button" title="ุชูุนูู ุงูุฅุดุนุงุฑุงุช">๐ ุชูุนูู ุฅุดุนุงุฑุงุช</button>
      </div>
    </header>

    <main class="deviceWrap">
      <section class="device">

        <!-- LED strip (ุฃููุงุฑ ุงูุฌูุงุฒ ุงูุนูููุฉ) -->
        <div class="ledStrip">
          <div class="led" id="ledPower" title="ุชุดุบูู"></div>
          <div class="led" id="ledMic" title="ูุงูู"></div>
          <div class="led" id="ledNet" title="ุงุชุตุงู/ุดุจูุฉ"></div>
          <div class="led warn" id="ledWarn" title="ุชุญุฐูุฑ"></div>

          <div class="battery" title="Battery (ุชุฌุฑูุจู)">
            <div class="batteryFill" id="batFill"></div>
          </div>
        </div>

        <!-- โ Network LEDs (3 ูู + 3 ููุทุฑู ุงูุขุฎุฑ) -->
        <div class="netBarsWrap" aria-label="Network Quality">
          <div class="netGroup">
            <div class="netLabel">ุดุจูุชู</div>
            <div class="netBars" id="netSelf">
              <span class="bar" id="netSelf1" title="Net Self 1"></span>
              <span class="bar" id="netSelf2" title="Net Self 2"></span>
              <span class="bar" id="netSelf3" title="Net Self 3"></span>
            </div>
          </div>

          <div class="netGroup">
            <div class="netLabel">ุดุจูุฉ ุงูุทุฑู ุงูุขุฎุฑ</div>
            <div class="netBars" id="netRemote">
              <span class="bar" id="netRemote1" title="Net Remote 1"></span>
              <span class="bar" id="netRemote2" title="Net Remote 2"></span>
              <span class="bar" id="netRemote3" title="Net Remote 3"></span>
            </div>
          </div>
        </div>

        <!-- โ ุจุงูุฑ AdSense ุซุงุจุช -->
        <div class="adBar" aria-label="Ad Banner Slot">
          <div class="adBarTitle">ุฅุนูุงู ุจุงูุฑ (ุซุงุจุช ุจููุงู ูุญุฏุฏ)</div>

          <!-- ุถุน data-ad-slot ุงูุญูููู ูู AdSense -->
          <ins class="adsbygoogle adBanner"
               style="display:block"
               data-ad-client="ca-pub-9061862125800717"
               data-ad-slot="PUT_SLOT_ID_HERE_BANNER"
               data-ad-format="horizontal"
               data-full-width-responsive="false"></ins>

          <div class="adNote">ุงูุฅุนูุงู ูุญุตูุฑ ุฏุงุฎู ูุฐุง ุงููุณุชุทูู ููุท.</div>
        </div>

        <!-- Screen -->
        <div class="screen">
          <div class="screenTop">
            <div class="tag">CH</div>
            <div class="chText" id="chDisplay">room1</div>
            <div class="pill" id="statePill">ุฌุงูุฒ</div>
          </div>

          <div class="screenMid">
            <canvas id="wave" aria-label="waveform"></canvas>

            <div class="screenOverlay">
              <div class="overlayRow">
                <span>Presence Room:</span> <b id="roomDisplay">call_room1</b>
                <span class="dot">โข</span>
                <span>Name:</span> <b id="nameDisplay">User</b>
              </div>
              <div class="overlayRow mutedSmall">
                ูุณุชูู ุงูุตูุช: <b id="lvlText">0</b> โ ุฅุฎุฑุงุฌ: <span id="outText">Default</span>
              </div>
            </div>

            <!-- โ Incoming Call Box -->
            <div id="callBox" class="callBox hidden" aria-label="Incoming Call">
              <div class="callTitle">๐ ููุงููุฉ ูุงุฑุฏุฉ</div>
              <div class="callMeta">
                ูู: <b id="callFrom">โ</b> โข ููุงุฉ: <b id="callChannel">โ</b>
              </div>
              <div class="callBtns">
                <button id="callAccept" class="btn primary" type="button">โ ูุจูู</button>
                <button id="callDecline" class="btn danger" type="button">โ ุฑูุถ</button>
              </div>
              <div class="callHint mutedSmall">ุนูุฏ ุงููุจูู ุณูุชู ุงูุฏุฎูู ููููุงุฉ ุชููุงุฆููุง.</div>
            </div>
          </div>

          <!-- Presence lists -->
          <div class="radioFeed">
            <div class="feedCol">
              <div class="feedTitle">๐ข Online</div>
              <ul id="onlineList"></ul>
            </div>

            <div class="feedCol">
              <div class="feedTitle">โช Offline</div>
              <ul id="offlineList"></ul>
            </div>

            <div class="feedCol full">
              <div class="feedTitle">๐ ุณุฌู ุงูุฃุญุฏุงุซ</div>
              <div id="activityBox" class="activityBox"></div>
            </div>
          </div>

          <pre class="screenLog" id="status">ุฌุงูุฒโฆ</pre>
        </div>

        <!-- Controls -->
        <div class="controls">

          <div class="grid2">
            <div>
              <label for="name">ุงุณูู</label>
              <input id="name" value="User" placeholder="ูุซุงู: Abudy" autocomplete="nickname" />
            </div>

            <div>
              <label for="room">Room (Presence + Calls)</label>
              <!-- โ ูุงุฒู ุชููู call_room1 -->
              <input id="room" value="call_room1" placeholder="call_room1" />
            </div>
          </div>

          <label for="channel">Channel (ููุณู ุนูู ุงูุฌูุงุฒูู) โ Agora</label>
          <!-- โ ููุง ุฎูููุง room1 -->
          <input id="channel" value="room1" placeholder="room1" />

          <label for="token">Token (ุงุฎุชูุงุฑู)</label>
          <input id="token" placeholder="ุงุชุฑูู ูุงุถู ุฅุฐุง Token ุบูุฑ ูุทููุจ" />

          <div class="btnRow">
            <button id="joinBtn" class="btn primary" type="button">ุฏุฎูู</button>
            <button id="leaveBtn" class="btn danger" type="button" disabled>ุฎุฑูุฌ</button>
            <button id="muteBtn" class="btn ghost" type="button" disabled>๐๏ธ ูุชู</button>

            <!-- โ ุฒุฑ ุงูููุฉ ุงูุฑุงุฏุนุฉ / ุงููุงูุฑูุฉ -->
            <button id="deterrenceBtn" class="btn warn" type="button" disabled>โก ุงูููุฉ ุงูุฑุงุฏุนุฉ: OFF</button>
          </div>

          <div class="btnRow">
            <button id="callBtn" class="btn warn" type="button">๐ ุฅุฑุณุงู ูุฏุงุก</button>
            <button id="copyBtn" class="btn ghost" type="button">๐ ูุณุฎ ุฑุงุจุท</button>
          </div>

          <div class="row">
            <label class="rowLabel" for="spkVol">๐ ุตูุช ุงูุณุจููุฑ</label>
            <input id="spkVol" type="range" min="0" max="100" value="80" />
            <span id="spkVolVal" class="num">80</span>
          </div>

          <div class="row">
            <label class="rowLabel" for="outSel">๐ง ูุฎุฑุฌ ุงูุตูุช</label>
            <select id="outSel"></select>
            <button id="outRefreshBtn" class="btn ghost" type="button">ุชุญุฏูุซ</button>
          </div>

          <div class="hintBox">
            <div class="hintTitle">ุชูุจูู ููู</div>
            <div class="hintText">
              ูุฐู ุงูุฃููุงุฏ ุชุฌุฑูุจูุฉ ููุชุฏุฑูุจ ุงูุชููู ููุทูุงุจ ูุงูุชุนููู ููุท.
              ุฃู ุงุณุชุฎุฏุงู ุฎุงุฑุฌ ุฅุทุงุฑ ุงูุชุนููู ูููู ุนูู ูุณุคูููุฉ ุงููุณุชุฎุฏู ุจุงููุงูู.
            </div>
            <div class="hintText mutedSmall">
              ููุงุญุธุฉ: ุงูุฅุดุนุงุฑุงุช ุจุงูุฎูููุฉ ุชุญุชุงุฌ PWA + Service Worker + ุณูุงุญ Notifications.
            </div>
          </div>
        </div>

        <!-- โ ููุญุฉ ุฅุนูุงู ูุณุชุทูู (ูุฑุจุญ ุนุงุฏุฉู) โ ุซุงุจุช -->
        <div class="adPanel" aria-label="Ad Rectangle Slot">
          <div class="adPanelTitle">ููุญุฉ ุฅุนูุงููุฉ (ูุณุชุทูู ุซุงุจุช)</div>

          <ins class="adsbygoogle adRect"
               style="display:block"
               data-ad-client="ca-pub-9061862125800717"
               data-ad-slot="PUT_SLOT_ID_HERE_RECT"
               data-ad-format="rectangle"
               data-full-width-responsive="false"></ins>

          <div class="adNote">ุงูุฅุนูุงู ุซุงุจุช ููุง ููุท.</div>
        </div>

      </section>
    </main>
  </div>

  <!-- Agora Web SDK -->
  <script src="https://download.agora.io/sdk/release/AgoraRTC_N-4.20.0.js"></script>

  <!-- โ Service Worker register + Notification permission button -->
  <script>
    // ุชุณุฌูู Service Worker (ุถุฑูุฑู ููุฅุดุนุงุฑุงุช ุจุงูุฎูููุฉ ุนูุฏ ุชุซุจูุช PWA)
    if ("serviceWorker" in navigator) {
      window.addEventListener("load", () => {
        navigator.serviceWorker.register("./sw.js").catch(console.warn);
      });
    }

    // ุฒุฑ ุชูุนูู ุงูุฅุดุนุงุฑุงุช
    document.addEventListener("DOMContentLoaded", () => {
      const btn = document.getElementById("notifBtn");
      if (!btn) return;

      btn.addEventListener("click", async () => {
        try {
          if (!("Notification" in window)) {
            alert("ุงููุชุตูุญ ูุง ูุฏุนู Notifications.");
            return;
          }
          const perm = await Notification.requestPermission();
          if (perm === "granted") {
            alert("โ ุชู ุชูุนูู ุงูุฅุดุนุงุฑุงุช. (ูุฅุดุนุงุฑ ูุงูุดุงุดุฉ ูููููุฉ: ุซุจูุช ุงููููุน ูุชุทุจูู PWA)");
          } else {
            alert("โ ูู ูุชู ููุญ ุตูุงุญูุฉ ุงูุฅุดุนุงุฑุงุช.");
          }
        } catch (e) {
          console.warn(e);
          alert("ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุทูุจ ุงูุฅุดุนุงุฑุงุช.");
        }
      });
    });
  </script>

  <!-- App -->
  <script type="module" src="./app.js"></script>

  <!-- โ AdSense push (ุซุงุจุชุ ุจุฏูู Auto Ads) -->
  <script>
    window.addEventListener("load", () => {
      try {
        (adsbygoogle = window.adsbygoogle || []);
        document.querySelectorAll("ins.adsbygoogle").forEach(ins => {
          if (ins.dataset.pushed === "1") return;
          (adsbygoogle).push({});
          ins.dataset.pushed = "1";
        });
      } catch (e) {
        console.warn("AdSense init failed:", e);
      }
    });
  </script>

</body>
</html>
    <script type="module" src="./script.js"></script>

  </body>
  
</html>
